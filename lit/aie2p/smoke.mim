plugin core;
plugin compile;
plugin direct;
plugin aie2p;

import compile;
import direct;

lam extern _compile (): %compile.Phase =
    %compile.phases ff (
        %compile.pass2phase %aie2p.lower_pass,
        direct_phases,
        %compile.branch_normalize_phase,
        %compile.ret_wrap_phase
    );

fun extern main(x: I32): I32 =
    let y = %aie2p.get_coreid ();
    return y;
